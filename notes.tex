\documentclass[11pt]{article}

%\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{latexsym}
\usepackage{proof}
\usepackage[margin=1in]{geometry}
\usepackage{mathpartir}
\usepackage{graphicx} % for the nice downarrow
\usepackage{xifthen}

\usepackage{titlesec}
\titleformat*{\section}{\large\bfseries}
\titleformat*{\subsection}{\bfseries}
%\renewcommand{\thesetion}{\arabic{section}}
%\renewcommand{\thesubsection}{(\alpha{subsection})}


\usepackage{listings}
\usepackage{color}
\definecolor{eclipseBlue}{RGB}{42,0.0,255}
\definecolor{eclipseGreen}{RGB}{63,127,95}
\lstset {
  basicstyle=\small\ttfamily,
  captionpos=b,
  tabsize=2,
  columns=fixed,
  breaklines=true,
  mathescape=true,
% frame=l,
% numbers=left,
% numberstyle=\small\ttfamily,
  morekeywords= {
    EQUAL, GREATER, LESS, NONE, SOME, abstraction, abstype, and, andalso, array, as, before, bool, case, char, datatype, do, else, end, eqtype, exception, exn, false, fn, fun, functor, handle, if, in, include, infix, infixr, int, let, list, local, nil, nonfix, not, o, of, op, open, option, orelse, overload, print, raise, real, rec, ref, sharing, sig, signature, string, struct, structure, substring, then, true, type, unit, val, vector, where, while, with, withtype, word
  },
  morestring=[b]",
  morecomment=[s]{(*}{*)},
  stringstyle=\color{black},
  identifierstyle=\color{eclipseBlue},
  keywordstyle=\color{red},
  commentstyle=\color{eclipseGreen}
}

\setlength\parindent{0pt}

% samepage doesn't quite work in some cases, not sure why
% TODO: 16pt is an approximation
\newenvironment{grouped}[1]{\begin{minipage}{\textwidth}#1}{\end{minipage}\vspace{16pt}}

\newcommand{\trans}[1]{$\xrightarrow{\textnormal{#1}}$}
\newcommand{\tab}{\hspace*{2pt}}
\newcommand{\arrow}{\mathbin{\rightarrow}}
\newcommand{\bnfdef}{\mathrel{\Coloneqq}}
\newcommand{\bnfalt}{\mathrel{\mid}}
\newcommand{\note}[1]{{\tiny Note: #1}}
\newcommand{\vd}{\vdash}
\newcommand{\of}{\mathrel{:}}
\newcommand{\bind}[2]{#1\mathrel{.} #2}
\newcommand{\subst}[3]{[#1 \mathbin{/} #2]#3}

\newcommand{\oversetr}[2]{\overset{#2}{#1}}

\newcommand{\ace}{\Leftrightarrow} % Algorithmic Constructor Equivalence
\newcommand{\ape}{\leftrightarrow} % Algorithmic Path Equivalence

\newcommand{\Darrow}{\mathrel{\scalebox{1.2}[1]{$\Downarrow$}}}
\newcommand{\whn}{\Darrow}
\newcommand{\whr}{\mathrel{\leadsto}}
\newcommand{\Uarrow}{\mathrel{\scalebox{1.2}[1]{$\Uparrow$}}}
%\newcommand{\nk}{\mathrel{\Uarrow}}
\newcommand{\nk}{\mathrel{\uparrow}}
\newcommand{\lift}{\mathrel{\uparrow}}
\newcommand{\sk}{\mathrel{\le}} % TODO: triangle less equal

\newcommand{\synthesis}{\Rightarrow}
\newcommand{\checking}{\Leftarrow}

\newcommand{\comp}{\mathrel{\circ}}

\newcommand{\singleton}[1]{\mathop{S}(#1)}

%\newcommand{\test}[3][]{\ifthenelse{\isempty{#1}}{omitted}{given} #2 #3}
\newcommand{\inferr}[3][]{\inferrule*[Right=#1]{#3}{#2}}


\newcommand{\nats}{\mathcal{N}}
\newcommand{\reals}{\mathcal{R}}

\DeclareMathOperator{\kind}{kind}
\DeclareMathOperator{\ok}{ok}
\DeclareMathOperator{\fv}{FV}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\type}{Type}
\DeclareMathOperator{\refraw}{ref}
\DeclareMathOperator{\intt}{int}
\newcommand{\sref}[1]{\refraw(#1)}


\title{HOT Compilation Notes}
\author{Rahul Manne\\
{\tt rmanne}@andrew.cmu.edu}
\date{}

\begin{document}
\maketitle

\section*{Disclaimer/README}
These are only reference notes, and by no means fully capture what
is taught in class.\\

Notes for 170131 (on substitution) are extremely incoherent
so I did not include them by default.\\

There may be errors, feel free to report them to me.\\

\section{Compiler Structure}
SML \\
\tab\trans{elaborate} IL-Module \\
\tab\tab\trans{phase-splitting} IL-Direct \\
\tab\tab\tab\trans{cps conversion} IL-CPS \\
\tab\tab\tab\tab\trans{closure conversion} IL-Closure \\
\tab\tab\tab\tab\tab\trans{hoisting} IL-Hoist \\
\tab\tab\tab\tab\tab\tab\trans{allocation} IL-Alloc \\
\tab\tab\tab\tab\tab\tab\tab\trans{code-generation} C

\include{170124}

\include{170126}

%\include{170131}

\include{170202}

\include{170207}

\include{170209}

\end{document}
